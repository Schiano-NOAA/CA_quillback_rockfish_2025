# Executive Summary

## Stock{-}

This assessment reports the status of `r spp` (*Sebastes maliger*) off the California coast in U.S. waters, using data through 2024. This assessment does not account for populations located in Oregon waters or other areas off the U.S. West Coast and assumes that these other populations do not contribute to nor take from the population being assessed here.

<!-- Species/area, including an evaluation of any potential biological basis for regional management -->

## Catches{-}

`r Spp` is encountered in both commercial and recreational fisheries throughout its range. In waters off the coast of California, `r spp` is generally not a highly desirable species by recreational fishermen  and its value in the commercial fishery rose with the development of the live fish fishery. Recreational removals are the largest source of fishing mortality and represent approximately 70 percent of the total removals of `r spp` across all years (@tbl-es-catches, @fig-es-landings). The majority of the commercial landings for `r spp` occurred between 1990 and 2008, with a small increase from 2016 to 2022 prior to the stock being defined and subsequently declared overfished.  

<!-- \clearpage -->

```{r, tbl-es-catches, results = "asis"}
#| label: tbl-es-catches
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) catches_es_cap 
#| tbl-pos: H

catches_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4, # depends on number of fleets with catch
    decimals = 2
  ) |>
  gt::tab_options(
    table.font.size = 12,
    # if want to not have tables the width of the page include the below option:
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  #cols_width(
  #  everything() ~ px(75)
  #) |>
  gt::as_latex()

```

```{r, fig-es-landings} 
#| label: fig-es-landings
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Landings in metric tons (mt) by year for each fleet."
#| fig-alt: "See Table 9 for values."

knitr::include_graphics("r4ss_plots/catch2_landings_stacked.png")

```
<!-- \clearpage -->

## Data and assessment{-}

Length-based data-moderate assessments were conducted in 2021 for `r spp` off the U.S. West Coast. The population was assessed regionally with three separate population models for Washington, Oregon, and California. Only the stock off the coast of California is being assessed in 2025. This assessment uses Stock Synthesis 3 (version 3.30.21.1). The assessment model is a single-area, single-sex model and operates on an annual time step covering the period 1916--2024, wiht a twelve year-projection  and assumes an unfished population prior to 1916. Population dynamics are modeled for ages 0 through 80, with age FROG being the accumulator age. The model is conditioned on catch from two sectors, commercial and recreational, and is informed by both fishery-dependent and fishery-independent indices of abundance. The model is fit to length composition data from fishery-independent and fishery-dependent sources, as well as age compositions conditioned on length, with all available ages except for those from the commercial fleet included in a growth fleet. Discards from the commercial and recreational fleets were estimated externally and added to landings to represent total catch. The model also incorporates an updated length-based maturity schedule and externally estimated length-weight relationship and fecundity-at-length function for quillback rockfish collected from waters off California. The assessment fixes values for natural mortality at the median of the prior (0.068 yr^-1^) and estimates growth parameters. Year-class strength is estimated as deviations from a Beverton-Holt stock-recruitment relationship beginning in 1965 in the south and in 1993. Steepness of the Beverton-Holt stock-recruitment relationship is fixed at the mean of the prior, 0.72.

All the data sources included in the model for `r spp` in California have been re-evaluated for this assessment, including improvements and updates in the data (and associated analyses) that were used in the 2021 assessment. Two fishery-independent data source were added to this assessment, the \gls{s-ccfrp} hook-and-line survey and the \gls{cdfw} Remotely Operated Vehicle survey. Both of these surveys were developed to monitor fish inside the network of Marine Protected Areas as well as in adjacent areas open to fishing. Thee assessment also includes a fishery-dependent index of abundance from the PR fleet that was not included in the 2021 assessments. Finally, this is the first assessment to include age composition data to support estimates of growth and population dynamics within the base model.

Within model uncertainty is explicitly included in this assessment by parameter estimation uncertainty, while among model uncertainty is explored through sensitivity analyses addressing alternative input assumptions such as data treatment and weighted, and model specification sensitivity to the treatment of life history parameters, selectivity, and recruitment. Base models were selected that best fit the observed data while concomitantly balancing the desire to capture the central tendency across those sources of uncertainty, ensure model realism and tractability, and promote robustness to potential model mis-specification.

<!-- Date of last assessment, type of assessment model, data available, new information, and information lacking. -->

## Stock Output and Dynamics{-}

Spawning output of `r spp` is reported here (@fig-es-sb, @tbl-es-sb) 


<!-- Trends and current levels relative to virgin or historic levels, description of uncertainty-include table for last 10 years and graph with long term estimates. -->

<!-- \clearpage  -->
 (@fig-es-sb, @fig-es-depl)
 (@tbl-es-sb). 

```{r, tbl-es-sb, results = "asis"}
#| label: tbl-es-sb
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) ssb_es_cap 
#| tbl-pos: H

ssb_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4,
    decimals = 2
  ) |>
  gt::fmt_number(
    columns = 5:7,
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    tidyselect::everything() ~ px(75)
  ) |>
  gt::as_latex()
```

```{r} 
#| label: fig-es-sb
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Estimated time series of spawning output (trillions of eggs) for the base model."
#| fig-alt: "See table 26 for values."
#| fig-pos: H

knitr::include_graphics("r4ss_plots/ts7_Spawning_output_with_95_intervals.png")

```

```{r} 
#| label: fig-es-depl
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Estimated time series of fraction of unfished spawning output for the base model."
#| fig-alt: ""
#| fig-pos: H

knitr::include_graphics("r4ss_plots/ts9_Relative_spawning_output_intervals.png")

```

## Recruitment{-}

 (@tbl-es-recr, @fig-es-recruits). 

<!-- Trends and current levels relative to virgin or historic levels-include table for last 10 years and graph with long term estimates. -->

```{r, tbl-es-recr, results = "asis"}
#| label: tbl-es-recr
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) recr_es_cap 
#| tbl-pos: H

recr_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4,
    decimals = 0
  ) |>
  gt::fmt_number(
    columns = 5:7,
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    tidyselect::everything() ~ px(75)
  ) |>
  gt::as_latex()

```

```{r} 
#| label: fig-es-recruits
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Estimated time series of age-0 recruits for the base model."
#| fig-alt: ""
#| fig-pos: H

knitr::include_graphics("r4ss_plots/ts11_Age-0_recruits_(1000s)_with_95_asymptotic_intervals.png")

```

<!-- 
```{r} 
#| label: fig-es-recdevs
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Estimated time series of recruitment deviations for the base model."
#| fig-alt: ""
#| fig-pos: H

knitr::include_graphics("r4ss_plots/recdevs2_withbars.png")

```
-->

<!-- \clearpage -->
## Exploitation Status{-}

 (@tbl-es-spr, @fig-es-kobe).

<!-- Exploitation rates (i.e., total catch divided by exploitable biomass, or the annual SPR harvest rate) - include a table with the last 10 years of data and a graph showing the trend in fishing mortality relative to the target (y-axis) plotted against the trend in biomass relative to the target (x-axis). -->

```{r, tbl-es-spr, results = "asis"}
#| label: tbl-es-spr
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) spr_es_cap 
#| tbl-pos: H

spr_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:7,
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    tidyselect::everything() ~ px(80)
  ) |>
  gt::as_latex()

```

```{r} 
#| label: fig-es-kobe
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Phase plot of fishing intensity versus fraction unfished."
#| fig-alt: "See table @tbl-ts for the values of the fraction unfished and fishing intensity which are related in this figure."
#| fig-pos: H

knitr::include_graphics("r4ss_plots/SPR4_phase.png")

```

<!-- \clearpage -->

## Ecosystem Considerations{-}



## Reference Points{-}

@tbl-ref-points-es

<!-- Management targets and definitions of overfishing, including the harvest rate that brings the stock to equilibrium at B24% for flatfishes and B40% for all other groundfish stocks (BMSY proxies) and the equilibrium stock size that results from fishing at the default harvest rate (the FMSY proxy). Include a summary table that compares estimated reference points for SSB, SPR, Exploitation Rate and Yield based on SSB proxy for MSY, SPR proxy for MSY, and estimated MSY values. -->

\clearpage

```{r, tbl-ref-points-es, results = "asis"}
#| label: tbl-ref-points-es
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) reference_points_cap 
#| tbl-pos: H

reference_points_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4,
    rows = c(2:4, 7, 10, 12, 15, 17, 20),
    decimals = 0
  ) |>
  gt::fmt_number(
    columns = 2:4,
    rows = 1,
    decimals = 1
  ) |>
  gt::fmt_number(
    columns = 2:4,
    rows = c(5, 8, 9, 13:14, 18:19),
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>  
  gt::tab_style(
    style = list(
      gt::cell_text(style = "italic")
    ),
    locations = gt::cells_body(
      columns = "Reference Point",
      rows = dplyr::starts_with("Reference")
    )
  ) |>
  gt::sub_missing(
    columns = tidyselect::everything(),
    missing_text = "---"
  ) |>
  gt::as_latex()

```

## Management Performance{-}

 (@tbl-es-management)
<!-- Catches in comparison to OFL, ABC, HG, and OY/ACL values for the most recent 10 years (when available), overfishing levels, actual catch and discard. Include OFL (encountered), OFL (retained) and OFL (dead) if different due to discard and discard mortality. -->

```{r, tbl-es-management, results = "asis"}
#| label: tbl-es-management
#| warning: false
#| echo: false
#| tbl-cap: "Recent trend in the overfishing limits (OFL), the acceptable biological catches (ABCs), the annual catch limits (ACLs), and the total removals (landings + dead discards) all in metric tons (mt). For 2015-2022, OFLs and ACLs are the contributions of quillback rockfish within the Minor Nearshore Rockfish North and South complexes, and so these are provided for both complexes. The ACL contribution allocated to California across both complexes is also provided, based on approximate allocations as described in the text. For 2023-2024, California quillback rockfish were assigned their own OFL, ABC, and ACL, and then divided into the north and south management units, however value here are provided as California only values."
#| tbl-pos: H

management <- read.csv(here("report", "tables", "management.csv")) |>
  dplyr::mutate("ACLca" = ACLnorth * 0.287 + ACLsouth) #only correct prior to 2023
recent <- management[management$Year %in% c(2023, 2024), ]
management[management$Year %in% c(2023, 2024), -1] <- NA
management[management$Year %in% c(2023, 2024), c("OFLca", "ABCca", "ACLca")] <-
  cbind(c(recent$OFLsouth + recent$OFLnorth),
        c(recent$ABCsouth + recent$ABCnorth),
        c(recent$ACLsouth + recent$ACLnorth))
management$catch <- recent_management_table$`Catch (mt)`
management |>
  gt::gt() |>
  gt::cols_hide(
    columns = c(ABCsouth,
                ABCnorth)
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE
  ) |>
  gt::cols_label(
    OFLsouth = "OFL North",
    ACLsouth = "ACL South",
    OFLnorth = "OFL North",
    ACLnorth = "ACL North",
    OFLca = "OFL CA",
    ABCca = "ABC CA",
    ACLca = "ACL CA",
    catch = "Total removals"
  ) |>
  gt::cols_width(
    everything() ~ px(50)
  ) |>
  gt::fmt_number(
    decimals = 2
  ) |>
  gt::fmt_number(
    columns = 1,
    decimals = 0,
    use_seps = FALSE
  ) |>
  gt::sub_missing(
    columns = tidyselect::everything(),
    missing_text = "---"
  ) |>
  gt::as_latex()
```


## Unresolved Problems and Major Uncertainties{-}


<!-- Any special issues that complicate scientific assessment, questions about the best model scenario, etc. -->

## Decision Table and Harvest Projections{-}

 @tbl-es-projections

<!-- Projected yields (OFL, ABC and ACL), spawning biomass / output, and stock depletion levels for each year. OFL calculations should be based on the assumption that future catches equal ABCs and not OFLs. -->

::: {.landscape}

```{r, tbl-es-projections, results = "asis"}
#| label: tbl-es-projections
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) projections_cap 
#| tbl-pos: H

projections_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = c(2:5, 7:9),
    decimals = 0
  ) |>
  gt::fmt_number(
    columns = c(6, 10),
    decimals = 3,
    drop_trailing_zeros = FALSE,
  ) |>
  gt::fmt_number(
    columns = c(4, 5, 7, 8),
    decimals = 2,
    drop_trailing_zeros = FALSE,
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::sub_missing(
    columns = tidyselect::everything(),
    missing_text = "---"
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    everything() ~ px(75)
  ) |>
  gt::as_latex()

```

:::

## Scientific Uncertainty{-}

The model estimate of the log-scale standard deviation of the overfishing limit (OFL) in 2025 is `r round(mod_out$OFL_sigma, 3)`. 

## Research and Data Needs{-}


{{< pagebreak >}}

## Risk Table{-}


{{< pagebreak >}}

